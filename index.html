<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Acid & Skeleton Practice</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
h1 { font-size: 1.8em; margin-bottom: 0.5em; }
select, input, button { font-size: 1em; padding: 0.3em; margin: 0.2em 0; }
.questionBox { background: #fff; padding: 15px; margin-top: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
.feedback-correct { color: green; font-weight: bold; margin-top: 10px; }
.feedback-wrong { color: red; font-weight: bold; margin-top: 10px; }
.small { font-size: 0.85em; color: #555; }
</style>
</head>
<body>
<h1>Acid & Skeleton Practice</h1>

<label for="mode">Mode:</label>
<select id="mode">
  <option value="acid">Name acids</option>
  <option value="skeleton">Equation skeletons</option>
</select>

<div class="questionBox">
  <div id="gradeDisplay" class="small">Grade: 6</div>
  <div id="questionPrompt" style="font-weight:600; margin-top:6px;">Loading question...</div>
  <input type="text" id="answerInput" placeholder="Type your answer">
  <button id="submitBtn">Submit</button>
  <div id="feedback"></div>
</div>

<script>
const QUESTIONS = {
  acid: {
    6: [
      { prompt: "Name HCl (aqueous).", canonicalAnswer: "hydrochloric acid", explanation: "Binary acid: 'hydro-' + root + '-ic acid'." },
      { prompt: "Name HBr (aq).", canonicalAnswer: "hydrobromic acid", explanation: "HBr in water is hydrobromic acid." }
    ],
    7: [
      { prompt: "Name H2SO4 (aq).", canonicalAnswer: "sulfuric acid", explanation: "SO4^2- → sulfuric acid (-ic)." },
      { prompt: "Name HNO3 (aq).", canonicalAnswer: "nitric acid", explanation: "NO3^- → nitric acid (-ic)." }
    ],
    8: [
      { prompt: "Name H3PO4 (aq).", canonicalAnswer: "phosphoric acid", explanation: "PO4^3- → phosphoric acid." }
    ]
  },
  skeleton: {
    6: [
      { prompt: "Solid sodium reacts with water — skeleton.", canonicalAnswer: "2 Na + 2 H2O -> 2 NaOH + H2", explanation: "Alkali metals react to form hydroxide + hydrogen gas." },
      { prompt: "Hydrogen burns in oxygen — skeleton.", canonicalAnswer: "2 H2 + O2 -> 2 H2O", explanation: "Combustion produces water." }
    ],
    7: [
      { prompt: "Magnesium reacts with HCl — skeleton.", canonicalAnswer: "Mg + 2 HCl -> MgCl2 + H2", explanation: "Single displacement: metal + acid → salt + H2." }
    ]
  }
};

let grade = 6;
let streak = 0;
let currentQuestion = null;

function pickRandomQuestion() {
  const mode = document.getElementById('mode').value;
  const pool = QUESTIONS[mode][grade];
  currentQuestion = pool[Math.floor(Math.random() * pool.length)];
  document.getElementById('questionPrompt').textContent = currentQuestion.prompt;
  document.getElementById('feedback').innerHTML = '';
  document.getElementById('gradeDisplay').textContent = `Grade: ${grade}`;
  document.getElementById('answerInput').value = '';
}

function normalize(str) { return str.trim().toLowerCase(); }

function submitAnswer() {
  const answer = normalize(document.getElementById('answerInput').value);
  const correctAnswer = normalize(currentQuestion.canonicalAnswer);
  const isCorrect = answer === correctAnswer;

  const feedbackDiv = document.getElementById('feedback');
  if (isCorrect) {
    streak++;
    grade = Math.min(12, grade + 1);
    feedbackDiv.innerHTML = `<div class="feedback-correct">Correct! ✅</div><div class="small">Explanation: ${currentQuestion.explanation}</div>`;
  } else {
    streak = Math.max(0, streak - 1);
    grade = Math.max(6, grade - 1);
    feedbackDiv.innerHTML = `<div class="feedback-wrong">Not quite ❌</div><div class="small">Expected: ${currentQuestion.canonicalAnswer}</div><div class="small">Explanation: ${currentQuestion.explanation}</div>`;
  }

  setTimeout(pickRandomQuestion, 800);
}

document.getElementById('submitBtn').addEventListener('click', submitAnswer);
document.getElementById('answerInput').addEventListener('keydown', e => { if(e.key==='Enter'){submitAnswer();} });
document.getElementById('mode').addEventListener('change', () => { grade = 6; streak = 0; pickRandomQuestion(); });

pickRandomQuestion();
</script>
</body>
</html>
